import{r as g,j as e}from"./vendor-DUuTY2Hv.js";const x="jadran_saved_trips";function m(n){return new Date(n).toLocaleDateString("sl-SI",{day:"numeric",month:"short",year:"numeric"})}function v({level:n}){const r={Beginner:"#10b981",Intermediate:"#f59e0b",Advanced:"#f87171"};return e.jsx("span",{style:{fontSize:10,padding:"2px 8px",borderRadius:10,background:`${r[n]||"#3b9ece"}22`,color:r[n]||"#3b9ece",border:`1px solid ${r[n]||"#3b9ece"}44`,fontWeight:600},children:n})}function T(){const n=()=>{try{return JSON.parse(localStorage.getItem(x)||"[]")}catch{return[]}},r=s=>localStorage.setItem(x,JSON.stringify(s));return{saveTrip:(s,i)=>{var l;const c=n(),a={id:Date.now().toString(),savedAt:new Date().toISOString(),query:i,title:s.tripTitle,summary:s.summary,days:(l=s.days)==null?void 0:l.length,distance:s.totalDistance,difficulty:s.difficulty,itinerary:s};return r([a,...c.slice(0,19)]),a.id},deleteTrip:s=>{r(n().filter(i=>i.id!==s))},loadTrips:n}}function z({onLoad:n,currentItinerary:r,currentQuery:u}){const[o,s]=g.useState([]),[i,c]=g.useState(!1),[a,l]=g.useState(!1),{saveTrip:b,deleteTrip:h,loadTrips:f}=T();g.useEffect(()=>{s(f())},[i]);const y=()=>{r&&(b(r,u),s(f()),l(!0),setTimeout(()=>l(!1),2e3))},j=(t,p)=>{p.stopPropagation(),h(t),s(f())},S=t=>{n==null||n(t.itinerary,t.query),c(!1)};return e.jsxs("div",{style:{marginBottom:20},children:[e.jsxs("div",{style:{display:"flex",gap:8},children:[r&&e.jsx("button",{onClick:y,style:{flex:1,padding:"12px 16px",background:a?"rgba(16,185,129,0.15)":"rgba(59,158,206,0.08)",border:`1px solid ${a?"rgba(16,185,129,0.3)":"rgba(59,158,206,0.2)"}`,borderRadius:12,color:a?"#10b981":"#5a9ec0",cursor:"pointer",fontFamily:"Outfit, sans-serif",fontSize:14,fontWeight:600,display:"flex",alignItems:"center",justifyContent:"center",gap:8,transition:"all 0.2s"},children:a?"âœ… Shranjeno!":"ðŸ’¾ Shrani to pot"}),e.jsxs("button",{onClick:()=>c(!i),style:{flex:1,padding:"12px 16px",background:i?"rgba(59,158,206,0.15)":"rgba(59,158,206,0.05)",border:"1px solid rgba(59,158,206,0.2)",borderRadius:12,color:"#5a9ec0",cursor:"pointer",fontFamily:"Outfit, sans-serif",fontSize:14,fontWeight:600,display:"flex",alignItems:"center",justifyContent:"center",gap:8},children:["ðŸ“‚ Shranjene poti ",o.length>0&&`(${o.length})`]})]}),i&&e.jsx("div",{style:{marginTop:8,background:"linear-gradient(135deg, rgba(10,25,45,0.98), rgba(8,20,38,0.99))",border:"1px solid rgba(59,158,206,0.2)",borderRadius:12,overflow:"hidden"},children:o.length===0?e.jsxs("div",{style:{padding:24,textAlign:"center",color:"#3b7d9e",fontSize:14},children:["Å e ni shranjenih poti.",e.jsx("br",{}),e.jsx("span",{style:{fontSize:12,color:"#2a5a70"},children:"Generirajte pot in jo shranite za kasnejÅ¡i ogled."})]}):o.map((t,p)=>e.jsxs("div",{onClick:()=>S(t),style:{padding:"14px 16px",borderBottom:p<o.length-1?"1px solid rgba(59,158,206,0.08)":"none",cursor:"pointer",display:"flex",gap:12,alignItems:"flex-start",transition:"background 0.15s"},onMouseEnter:d=>d.currentTarget.style.background="rgba(59,158,206,0.06)",onMouseLeave:d=>d.currentTarget.style.background="transparent",children:[e.jsxs("div",{style:{flex:1},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:8,marginBottom:4},children:[e.jsx("span",{style:{color:"#c8dce8",fontWeight:600,fontSize:14},children:t.title}),t.difficulty&&e.jsx(v,{level:t.difficulty})]}),e.jsxs("div",{style:{fontSize:12,color:"#4a7d98",display:"flex",gap:12},children:[e.jsxs("span",{children:["â›µ ",t.days," dni"]}),e.jsxs("span",{children:["ðŸ“ ",t.distance]}),e.jsxs("span",{children:["ðŸ—“ï¸ ",m(t.savedAt)]})]}),t.query&&e.jsxs("div",{style:{fontSize:11,color:"#2d4f66",marginTop:4,fontStyle:"italic"},children:['"',t.query.substring(0,60),t.query.length>60?"...":"",'"']})]}),e.jsx("button",{onClick:d=>j(t.id,d),style:{background:"transparent",border:"none",color:"#2d4f66",cursor:"pointer",fontSize:16,padding:4,borderRadius:6,lineHeight:1},title:"IzbriÅ¡i",children:"âœ•"})]},t.id))})]})}export{z as default,T as useSavedTrips};
